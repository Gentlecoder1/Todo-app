document.addEventListener("DOMContentLoaded", () => {
  // const itemsLeft = document.getElementById("items-left");
  // const clearCompleted = document.getElementById("clear-completed");
  // const todoList = document.getElementById("todo-list");
  // const filterAll = document.getElementById("filter-all");
  // const filterActive = document.getElementById("filter-active");
  // const filterCompleted = document.getElementById("filter-completed");
  const crossIcon = document.getElementById("cross-icon");

  const task = document.getElementById("task");
  const taskForm = document.getElementById("form");
  const updateTask = document.getElementById("update-task");
  const field = document.getElementById("field");
  const active = document.getElementById("active");
  const list = document.querySelector(".list");
  const sunIcon = document.getElementById("sun-icon");
  const moonIcon = document.getElementById("moon-icon");
  const time = document.getElementById("time");
  const container = document.querySelector(".container");
  

  // for toggle between dark and light mode
  function toggleTheme(isDarkMode) {
    moonIcon.classList.toggle("hidden", isDarkMode);
    sunIcon.classList.toggle("hidden", !isDarkMode);

    container.classList.toggle("bg-[rgb(22,23,34)]", isDarkMode);
    container.classList.toggle("bg-white", !isDarkMode);

    field.classList.toggle("bg-white", !isDarkMode);
    field.classList.toggle("bg-gray-800", isDarkMode);
    field.classList.toggle("text-white", isDarkMode);

    list.classList.toggle("bg-white", !isDarkMode);
    list.classList.toggle("bg-gray-800", isDarkMode);

    const allUpdatedTask = document.querySelectorAll(".task-text");
    allUpdatedTask.forEach(taskText => {
      taskText.classList.toggle("text-gray-800", !isDarkMode);
      taskText.classList.toggle("text-white", isDarkMode);
    });

    active.classList.toggle("bg-white", !isDarkMode);
    active.classList.toggle("bg-gray-800", isDarkMode);

    const mobile = document.querySelector(".background picture img");
    const desktop = document.querySelector(".background picture source");

    if (!isDarkMode) {
      mobile.src = "./images/bg-mobile-light.jpg";
      desktop.srcset = "./images/bg-desktop-light.jpg";
    } else {
      mobile.src = "./images/bg-mobile-dark.jpg";
      desktop.srcset = "images/bg-desktop-dark.jpg";
    }
  }

  moonIcon.addEventListener("click", () => toggleTheme(true));
  sunIcon.addEventListener("click", () => toggleTheme(false));

  const taskList = document.querySelectorAll(".tasks");
  taskList.forEach((task) => {
    const checkIcon = task.querySelector(".check-icon");
    const checkTask = task.querySelector(".checkTask"); 
    // const todo = task.querySelector("#task-text"); 

    checkTask.addEventListener("click", () => {
      checkIcon.classList.toggle("hidden");
      // todo.classList.toggle("line-through");
      toggleTheme();
    })
  })
});
